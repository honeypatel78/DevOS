<form [formGroup]="postForm" (ngSubmit)="submitForm()" class=" acc-settings d-flex flex-column align-items-start justify-content-start p-3">
    
    <div class="mb-3 d-flex justify-content-between align-items-center w-100">
        <h3>Your Info</h3>
        <button (click)="toggleEdit(); playsound()" *ngIf="!editEnabled" class="btn-cross"><span class="material-symbols-outlined">
        edit
        </span></button>
        <button (click)="toggleEdit(); playsound()" type="submit" [disabled]="postForm.invalid" *ngIf="editEnabled" class="app-btn">Update</button>
    </div>  

    <!-- DISPLAY MODE -->
    <div class="" *ngIf="!editEnabled">
        <img [src]="'http://localhost:3000' + user.ProfilePhoto" alt="profile picture" class="profile-picture mb-2">
        <h4>{{user.Name}}</h4>
        <div class="label">Username:</div>
        <div class="box">{{'@' + user.Username}}</div>
        <div class="label">Bio:</div>
        <div class="box">{{user.Bio}}</div>
        <div class="label">Account Created At:
        <div class="box">{{user.CreatedAt | date:'short'}}</div>
        <div class="label">About:</div>
        <div class="box">{{user.About}}</div>
        </div>
        <button class="app-btn mt-4" (click)="togglePW(); playsound()">Change Password</button>
    </div>


    <!-- EDIT MODE -->
    <div *ngIf="editEnabled">

        <!-- Profile Photo -->
        <div class="card">
        <label for="imageUpload">/* Profile Picture */</label>
        <input class="input-file" type="file" id="imageUpload" accept="image/*" (change)="onImageSelected($event)" />
        <button type="submit" value="Upload Image" class="app-btn mt-2">Upload Image</button>
        </div>

        <!-- Name -->
        <div class="card">
        <label for="name">/* Name */</label>
        <input class="input-text" type="text" id="name" placeholder="Enter Name" formControlName="name" />
        </div>

        <!-- Username -->
        <div class="card">
        <label for="username">/* Username */</label>
        <input class="input-text" type="text" id="username" placeholder="Enter Name" formControlName="username" />
        </div>

        <!-- Bio -->
        <div class="card">
        <label for="bio">/* Bio */</label>
        <input class="input-text" type="text" id="bio" placeholder="Enter Name" formControlName="bio" />
        </div>

     </div>
  
    
</form>

  <!-- PassWord -->

    <div id="modal" class="modal d-flex flex-column" *ngIf="showPasswordChange"> 
    <form (ngSubmit)="changePassword()" class="modal-box text-start">
    <div class="head d-flex align-items-center justify-content-between p-3">
    <h4 class="">Change Password</h4>
    <div class="d-flex">
        <button class="btn-cross"><span class="material-symbols-outlined" (click)="togglePW(); playsound()">close</span></button>
    </div>
    </div>

    <div class="p-3">
    <div class="mb-4">
       <label for="username" class="me-2">Current Password:</label>
        <input
        id="password"
        class="input-box"
        type="password"
        [(ngModel)]="password"
        name="password"
        placeholder="Enter Current Password"
        required
        />
    </div>

    <div class="mb-3">
    <label for="newpw" class="me-2">New Password:</label>
    <input
      id="newpw"
      class="input-box"
      type="password"
      [(ngModel)]="newpass"
      name="newpass"
      placeholder="Enter New Password"
      required
    />
    </div>
    <div class="d-flex justify-content-center ">
    <button 
        class="app-btn"
        type="submit"
        (click)="playsound()">
          Change Password 
        </button>
    </div>
    </div>

   
  </form>
  <div *ngIf="loginMessage" style="color:red" class="mt-2">{{ loginMessage }}</div>
</div>
